(this["webpackJsonpto-do-list"]=this["webpackJsonpto-do-list"]||[]).push([[0],{31:function(e,t,n){},36:function(e,t,n){},59:function(e,t,n){},95:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n.n(c),r=n(53),a=n.n(r),o=(n(36),n(17)),i=n(3),u=n(6),l=(n(59),n(1)),d=function(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),n=t[0],s=t[1];return Object(l.jsxs)("div",{className:"home-page",children:[Object(l.jsx)("header",{className:"home-header",children:Object(l.jsx)("text",{children:"POMODOER"})}),Object(l.jsx)("div",{className:"room-form",children:Object(l.jsx)("input",{type:"text",placeholder:"enter room name...",value:n,onChange:function(e){s(e.target.value)},className:"input-field"})}),Object(l.jsx)("div",{className:"button",children:Object(l.jsx)(o.b,{to:"/".concat(n),className:"join-button",children:"join room"})})]})},j=n(14),b=n(35),O=n(25),h=n.n(O),f="newTaskItem",m="statusChange",x="clearCompleteTasks",v=function(e){var t=Object(c.useState)([]),n=Object(u.a)(t,2),s=n[0],r=n[1],a=Object(c.useState)([]),o=Object(u.a)(a,2),i=o[0],l=o[1],d=Object(c.useRef)();console.log("tasks after useList called",s),Object(c.useEffect)((function(){return console.log("creating new websocket connection"),d.current=h()("http://localhost:3000",{query:{roomId:e}}),d.current.on(f,(function(e){var t=Object(b.a)(Object(b.a)({},e),{},{ownedByCurrentUser:e.senderId===d.current.id});r((function(e){return[].concat(Object(j.a)(e),[t])})),Object(j.a)(i).push(!1),l((function(e){return[].concat(Object(j.a)(e),[!1])}))})),d.current.on(m,(function(e){var t=Object(j.a)(e.status);t[e.index]=!t[e.index],l(t)})),d.current.on("connect",(function(){console.log(d.current.id),O(d.current.id)})),d.current.on(x,(function(e){for(var t=[],n=[],c=0;c<e.status.length;c++)!0===e.status[c]?t.push(c):n.push(!1);l(n);for(var s=Object(j.a)(e.tasks),a=t.length-1;a>-1;a--)s.splice(t[a],1);r(s)})),function(){d.current.disconnect()}}),[e]),Object(c.useEffect)((function(){d.current.on("populate",(function(e){if(console.log("populate",e),console.log("data body",e[0].body),console.log(e.length),s.length!=e.length){for(var t=Object(j.a)(s),n=0;n<e.length;n++)t.push(e[n]);console.log("saved tasks",t),r(t)}}))}),[e,s]);var O=function(e){d.current.emit("sendId",{userId:e})};return{tasks:s,sendTask:function(e){d.current.emit(f,{body:e,senderId:d.current.id,statuses:i})},statuses:i,sendStatus:function(e,t){d.current.emit(m,{index:e,status:t})},sendClear:function(e,t){d.current.emit(x,{status:e,tasks:t})}}},p=(n(31),n(18)),k=function(e){var t=e.room;console.log("roomId",t);var n=v(t),c=n.tasks,r=n.sendTask,a=n.statuses,o=n.sendStatus,i=n.sendClear,d=s.a.useState(""),j=Object(u.a)(d,2),b=j[0],O=j[1],h=function(){r(b),O("")},f=function(e){console.log("handleClick"),e.preventDefault();var t=e.currentTarget.id;o(t,a)};return console.log("about to render",c),Object(l.jsxs)("div",{className:"taskList-page",children:[Object(l.jsxs)("div",{className:"ToDoForm",children:[Object(l.jsx)("div",{className:"toDoFormTitle",children:Object(l.jsx)("p",{children:"TASKS:"})}),Object(l.jsx)("input",{value:b,type:"text",onChange:function(e){O(e.target.value)},placeholder:"add a task...",onKeyPress:function(e){"Enter"===e.key&&h()},className:"taskInput"}),Object(l.jsx)(p.a,{variant:"tertiary",className:"addTask",onClick:h,children:"ADD"})]}),Object(l.jsx)("div",{className:"tasks-container",children:Object(l.jsxs)("ul",{className:"checklist",children:[Object(l.jsx)("p",{children:"TO DO:"}),c.map((function(e,t){return console.log(e,t),Object(l.jsx)("li",{id:t,className:"todo ".concat(e.ownedByCurrentUser?"my-task":"other-task"," ").concat(a[t]?"strike":""),onClick:f,children:e.body},t)}))]})}),Object(l.jsx)(p.a,{className:"center",variant:"primary",onClick:function(){console.log("handleClear called"),i(a,c)},children:"CLEAR"})]})},g="timerPush",N="workRestPush",C=function(e){var t=Object(c.useState)(!1),n=Object(u.a)(t,2),s=n[0],r=n[1],a=Object(c.useState)(!0),o=Object(u.a)(a,2),i=o[0],l=o[1],d=Object(c.useState)(25),j=Object(u.a)(d,2),b=j[0],O=j[1],f=Object(c.useState)(0),m=Object(u.a)(f,2),x=m[0],v=m[1],p=Object(c.useRef)();Object(c.useEffect)((function(){if(!0===s){var e=setInterval((function(){v((function(e){return e-1}))}),1e3);return function(){clearInterval(e)}}}),[s]);Object(c.useEffect)((function(){!0===s&&(-1===x&&0!==b?(v(59),O((function(e){return e-1}))):0===b&&-1===x&&!0===i?(O(5),v(0),l(!1)):0===b&&-1===x&&!1===i&&(O(25),v(0),l(!0)))}),[x]),Object(c.useEffect)((function(){return p.current=h()("http://localhost:3000",{query:{roomId:e}}),p.current.on(g,(function(e){r(!e.start)})),p.current.on(N,(function(e){var t=e.work;l(!t),!0===t?(O(5),v(0)):(O(25),v(0))})),function(){p.current.disconnect()}}),[e,s]);return{start:s,sendStart:function(e){p.current.emit(g,{start:e})},work:i,sendWork:function(e){p.current.emit(N,{work:e})},minutes:b,seconds:x}},S=function(e){var t,n=e.room,c=C(n),s=c.start,r=c.sendStart,a=c.work,o=c.sendWork,i=c.minutes,u=c.seconds,d=s?"STOP":"START",j=a?"REST":"WORK";return t=u<10?"0"+u:u,Object(l.jsx)("section",{children:Object(l.jsx)("section",{className:"timerTimer",children:Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{className:"buttons",children:[Object(l.jsx)(p.a,{variant:"secondary",onClick:function(){return r(s)},children:d})," ",Object(l.jsx)(p.a,{variant:"secondary",onClick:function(){o(a)},children:j})," "]}),Object(l.jsx)("h1",{className:"timerMargin",children:i+":"+t})]})})})},y=function(e){var t=e.match.params.roomId;return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)("div",{className:"App-header",children:Object(l.jsx)("header",{className:"collab-header",children:Object(l.jsx)(o.b,{to:"/",className:"home-button",children:Object(l.jsx)("h1",{className:"pomodoer",children:"POMODOER"})})})}),Object(l.jsx)("div",{className:"timer",children:Object(l.jsx)(S,{room:t})}),Object(l.jsxs)("h2",{children:["ROOM: ",t]}),Object(l.jsx)(k,{room:t})]})};var T=function(){return Object(l.jsx)(o.a,{children:Object(l.jsxs)(i.c,{children:[Object(l.jsx)(i.a,{exact:!0,path:"/",component:d}),Object(l.jsx)(i.a,{exact:!0,path:"/:roomId",component:y})]})})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,96)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),s(e),r(e),a(e)}))};a.a.render(Object(l.jsx)(s.a.StrictMode,{children:Object(l.jsx)(T,{})}),document.getElementById("root")),I()}},[[95,1,2]]]);
//# sourceMappingURL=main.73165a9d.chunk.js.map