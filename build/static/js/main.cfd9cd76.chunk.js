(this["webpackJsonpto-do-list"]=this["webpackJsonpto-do-list"]||[]).push([[0],{31:function(e,t,n){},37:function(e,t,n){},60:function(e,t,n){},96:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),s=n(53),r=n.n(s),o=(n(37),n(18)),i=n(4),u=n(3),d=(n(60),n(1)),l=function(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(d.jsxs)("div",{className:"home-page",children:[Object(d.jsx)("header",{className:"home-header",children:Object(d.jsx)("text",{children:"POMODOER"})}),Object(d.jsx)("div",{className:"room-form",children:Object(d.jsx)("input",{type:"text",placeholder:"enter room name...",value:n,onChange:function(e){a(e.target.value)},className:"input-field"})}),Object(d.jsx)("div",{className:"button",children:Object(d.jsx)(o.b,{to:"/".concat(n),className:"join-button",children:"join room"})})]})},j=n(19),O=n.n(j),b=function(e){var t=Object(c.useRef)(),n=Object(c.useState)(""),a=Object(u.a)(n,2),s=a[0],r=a[1];Object(c.useEffect)((function(){t.current=O()("http://localhost:5000",{query:{roomId:e}}),t.current.on("requestPassword",(function(e){r(e),console.log("password data",JSON.stringify(e))}))}));return{databasePassword:s,sendPassword:function(e){t.current.emit("addPassword",{password:e})}}},h=n(15),m=n(35),f="newTaskItem",x="statusChange",p="clearCompleteTasks",v=function(e){var t=Object(c.useState)([]),n=Object(u.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)([]),o=Object(u.a)(r,2),i=o[0],d=o[1],l=Object(c.useRef)();Object(c.useEffect)((function(){return console.log("creating new websocket connection"),l.current=O()("http://localhost:5000",{query:{roomId:e}}),l.current.on(f,(function(e){var t=Object(m.a)(Object(m.a)({},e),{},{ownedByCurrentUser:e.senderId===l.current.id});s((function(e){return[].concat(Object(h.a)(e),[t])})),Object(h.a)(i).push(!1),d((function(e){return[].concat(Object(h.a)(e),[!1])}))})),l.current.on("populate",(function(e){for(var t=Object(h.a)(a),n=0;n<e.length;n++)t.push(e[n]);for(var c=0;c<t.length;c++)t[c].senderId===l.current.id?t[c].ownedByCurrentUser=!0:t[c].ownedByCurrentUser=!1;s(t)})),l.current.on(x,(function(e){var t=Object(h.a)(e.status);t[e.index]=!t[e.index],d(t)})),l.current.on("connect",(function(){j(l.current.id)})),l.current.on(p,(function(e){for(var t=[],n=[],c=0;c<e.status.length;c++)!0===e.status[c]?t.push(c):n.push(!1);d(n);for(var a=Object(h.a)(e.tasks),r=t.length-1;r>-1;r--)a.splice(t[r],1);for(var o=0;o<a.length;o++)a[o].senderId===l.current.id?a[o].ownedByCurrentUser=!0:a[o].ownedByCurrentUser=!1;s(a)})),function(){l.current.disconnect()}}),[e]);var j=function(e){l.current.emit("sendId",{userId:e})};return{tasks:a,sendTask:function(e){l.current.emit(f,{body:e,senderId:l.current.id,statuses:i})},statuses:i,sendStatus:function(e,t){l.current.emit(x,{index:e,status:t})},sendClear:function(e,t){l.current.emit(p,{status:e,tasks:t})}}},k=(n(31),n(14)),w=function(e){var t=e.room,n=v(t),c=n.tasks,s=n.sendTask,r=n.statuses,o=n.sendStatus,i=n.sendClear,l=a.a.useState(""),j=Object(u.a)(l,2),O=j[0],b=j[1],h=function(){s(O),b("")},m=function(e){e.preventDefault();var t=e.currentTarget.id;o(t,r)};return Object(d.jsxs)("div",{className:"taskList-page",children:[Object(d.jsxs)("div",{className:"ToDoForm",children:[Object(d.jsx)("div",{className:"toDoFormTitle",children:Object(d.jsx)("p",{children:"TASKS:"})}),Object(d.jsx)("input",{value:O,type:"text",onChange:function(e){b(e.target.value)},placeholder:"add a task...",onKeyPress:function(e){"Enter"===e.key&&h()},className:"taskInput"}),Object(d.jsx)(k.a,{variant:"tertiary",className:"addTask",onClick:h,children:"ADD"})]}),Object(d.jsx)("div",{className:"tasks-container",children:Object(d.jsxs)("ul",{className:"checklist",children:[Object(d.jsx)("p",{children:"TO DO:"}),c.map((function(e,t){return Object(d.jsx)("li",{id:t,className:"todo ".concat(e.ownedByCurrentUser?"my-task":"other-task"," ").concat(r[t]?"strike":""," ").concat(e.status?"strike":""),onClick:m,children:e.body},t)}))]})}),Object(d.jsx)(k.a,{className:"center",variant:"primary",onClick:function(){i(r,c)},children:"CLEAR"})]})},N="workRestPush",S=function(e){var t=Object(c.useState)(!1),n=Object(u.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(!0),o=Object(u.a)(r,2),i=o[0],d=o[1],l=Object(c.useRef)(),j=Object(c.useState)(!1),b=Object(u.a)(j,2),h=b[0],m=b[1],f=Object(c.useState)(!1),x=Object(u.a)(f,2),p=x[0],v=x[1],k=Object(c.useState)(15e5),w=Object(u.a)(k,2),S=w[0],g=w[1],y=Object(c.useState)(1614986917e3),C=Object(u.a)(y,2),T=C[0],R=C[1],P=Object(c.useState)(15e5),E=Object(u.a)(P,2),D=E[0],I=E[1];Object(c.useEffect)((function(){return l.current=O()("http://localhost:5000",{query:{roomId:e}}),!1===p&&l.current.on("populateTimer",(function(e){s(e.action),g(e.countdown),I(e.countdown),R(e.clock),v(!0),B(!0,e.action,e.countdown,e.clock)})),l.current.on("sendInfo",(function(e){g(e.countdown),R(e.clock),s(e.action),B(!0,e.action,e.countdown,e.clock)})),l.current.on(N,(function(e){d(e.work),e.work?(I(3e5),g(3e5),R(e.clock)):(I(15e5),g(15e5),R(e.clock))})),function(){l.current.disconnect()}}),[e]);var B=function(e,t,n,c){if(e)if(t){var a=Date.now()-c;I(Math.max(0,n-a))}else I(n)};Object(c.useEffect)((function(){if(a){var e=setInterval((function(){B(p,a,S,T),!0===p&&(0!==D||h?h&&m(!1):(m(!0),A(i)))}),1e3);return function(){clearInterval(e)}}}));var A=function(e){var t=!e,n=Date.now();l.current.emit(N,{work:t,clock:n}),d(t),t?(I(15e5),g(15e5),R(n)):(I(3e5),g(3e5),R(n))};return{start:a,sendStart:function(e){var t=!e;l.current.emit("timerPush",{start:t,countdown:D,clock:Date.now()}),s(t)},work:i,sendWork:A,display:D,alarmSound:h,infoReceived:p}},g=n(55),y=n.p+"static/media/alarm_chime.9beb22e7.mp3",C=new AudioContext,T=function(e){var t=e.room,n=S(t),a=n.start,s=n.sendStart,r=n.work,o=n.sendWork,i=n.display,l=n.alarmSound,j=n.infoReceived,O=Object(g.a)(y,{volume:.75}),b=Object(u.a)(O,1)[0];Object(c.useEffect)((function(){console.log(l),!0===l&&b()}),[l]);var h=a?"STOP":"START",m=r?"REST":"WORK";if(!1===j)return Object(d.jsx)("section",{children:Object(d.jsx)("section",{className:"timerTimer"})});var f=Math.floor(i/1e3/60),x=Math.floor(i/1e3%60),p=f+":"+(x<10?"0"+x:x),v=p+" POMODOER";return document.title!==v&&(document.title=v),Object(d.jsx)("section",{children:Object(d.jsx)("section",{className:"timerTimer",children:Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{className:"buttons",children:[Object(d.jsxs)(k.a,{variant:"secondary",className:"startButton",onClick:function(){C.resume(),s(a)},children:[h," "]})," ",Object(d.jsx)(k.a,{variant:"secondary",className:"workButton",onClick:function(){o(r)},children:m})," "]}),Object(d.jsx)("h1",{className:"timerMargin",children:p})]})})})},R=function(e){var t=e.match.params.roomId,n=b(t),a=n.databasePassword,s=n.sendPassword,r=Object(c.useState)(""),i=Object(u.a)(r,2),l=i[0],j=i[1],O=Object(c.useState)(!0),h=Object(u.a)(O,2),m=h[0],f=h[1],x=Object(c.useState)(!1),p=Object(u.a)(x,2),v=p[0],N=p[1],S=Object(c.useState)(!0),g=Object(u.a)(S,2),y=g[0],C=g[1],R=function(e){j(e.target.value)},P=y?"ROOM: "+t:"PASSWORD: "+a,E=function(){l===a?f(!1):"nothing yet"===a?(f(!1),s(l)):l!==a&&N(!0)},D=function(e){"Enter"===e.key&&E()};return m&&!v?Object(d.jsxs)("div",{className:"passwordPage",children:[Object(d.jsx)("h3",{children:" ENTER PASSWORD:"}),Object(d.jsxs)("div",{className:"passwordForm",children:[Object(d.jsx)("input",{onChange:R,value:l,type:"text",placeholder:"enter a password...",onKeyDown:D,className:"passwordBar"}),Object(d.jsx)(k.a,{variant:"tertiary",className:"addTask",onClick:E,children:"ENTER"})]})]}):v&&m?Object(d.jsxs)("div",{className:"passwordPage",children:[Object(d.jsx)("h3",{children:" ENTER PASSWORD:"}),Object(d.jsxs)("div",{className:"passwordForm",children:[Object(d.jsx)("input",{onChange:R,value:l,type:"text",placeholder:"enter a password...",onKeyDown:D,className:"passwordBar"}),Object(d.jsx)(k.a,{variant:"tertiary",className:"addTask",onClick:E,children:"ENTER"})]}),Object(d.jsx)("p",{className:"alert",children:"WRONG PASSWORD"})]}):Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)("div",{className:"App-header",children:Object(d.jsx)("header",{className:"collab-header",children:Object(d.jsx)(o.b,{to:"/",className:"home-button",children:Object(d.jsx)("h1",{className:"pomodoer",children:"POMODOER"})})})}),Object(d.jsx)("div",{className:"timer",children:Object(d.jsx)(T,{room:t})}),Object(d.jsx)("h2",{className:"room",onClick:function(){C(!y),console.log("handlePress",P)},children:P}),Object(d.jsx)(w,{room:t})]})};var P=function(){return Object(d.jsx)(o.a,{children:Object(d.jsxs)(i.c,{children:[Object(d.jsx)(i.a,{exact:!0,path:"/",component:l}),Object(d.jsx)(i.a,{exact:!0,path:"/:roomId",component:R})]})})},E=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,98)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),s(e),r(e)}))};r.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(P,{})}),document.getElementById("root")),E()}},[[96,1,2]]]);
//# sourceMappingURL=main.cfd9cd76.chunk.js.map